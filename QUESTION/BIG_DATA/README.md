# Типичные вопросы на собесах

На собесах часто спрашивают одни и те же вопросы. Можно ли выучить ответы и стрелять ими, как из пулемета? Да, конечно. Пока собеседующие не будут нормально готовиться или спрашивать по кейсам, вы будете хакать эту систему.

***В какой-то момент мне начало надоедать, что все спрашивают одно и тоже и начинал уже отвечать на вопросы на скорость...***

- [Задачи с собеседований в моем чате на Boosty](https://boosty.to/halltape_data)

## SQL и базы данных
- Какие бывают виды джоинов логические?
Ответ: inner join, left join rigth join, cross join
- Какие бывают физические джоины?
Ответ: merge join, hash join, Nested Loop
- Как работают физические джоины?
Ответ: Merge join - это метод соединения слиянием, используемый когда обе таблицы достаточно большие и уже есть отсортированные данные по полям (JOIN-ключам участвующим в соединении), например при помощи индексов. Если таблицы не отсортированы заранее, то PostgreSQL выполнит сортировку перед выполнением соединения, что может увеличить затраты. Ключевое отличие от hash join в том, что merge join требует обязательной сортировки данных по JOIN-ключам, когда hash join не требует сортировки вообще. Он просто построит хеш-таблицу и будет использовать ее для поиска совпадений. Так же, про merge join стоит добавить, что он особенно полезен для диапазонных соединений (например, >=, <=), поскольку после сортировки он может эффективно обрабатывать такие условия.
      Hash join - это метод соединения при помощи хэширования, который используется в тех случаях, когда данные, по которым требуется выполнить соединение, не отсортированы. Алгоритм работает так, что сначала выбирается одна из таблиц, обычно меньшая по памяти, и для каждой ее строки создается запись в хеш-таблице. Затем, другая таблица (большая) сканируется, и каждая строка проверяется на сравнение с хеш-таблицей. Если найдено совпадение по нужным значениям, то строки объединяются. Так же, более явно подчеркну деталь, что PostgreSQL выбирает меньшую таблицу для создания хеш-таблицы, чтобы минимизировать использование памяти. Данная хеш-таблица затем используется для быстрого поиска соответствий во второй, более крупной таблицей. Финализируя можно сказать, что hash join чаще всего используется для больших таблиц, когда отсутствуют индексы или когда данные не отсортированы, а условие соединения предполагает точное совпадение (=). Диапазонные соединения, как правило, менее эффективны с hash join.
  Nested Loop - это метод соединения, использующий вложенные циклы, который для каждого значения одной таблицы, ищет соответствующее значение из другой таблицы. Если детальнее, то берется первое значение из первой таблицы и сравнивается последовательно со всеми значениями из второй таблицы, если находится соответствие, то запись включается в финальный набор данных. Когда значение из первой таблицы сравнилось со всеми значениями из второй таблицы, далее берется второе значение из первой маленькой таблицы и снова происходит сравнение со всеми значениями из второй таблицы. Собственно почему и используется название “nested loop” (вложеннеого цикла), т.к. весь процесс происходит до тех пор, пока каждое значение из первой таблицы не будет сравнено с каждым значением из второй таблицы.
- Как удалить дубликаты строк в SQL?
Ответ:
- Какие бывают оконные функции в SQL?
- Как найти медиану в таблице?

## Модели данных и нормализация

- Что такое нормализация данных? 
- Какие бывают модели данных? 
- Что такое Data Vault? 
- Что такое DWH по Инмону и Кимбалу?

## Потоковая и пакетная обработка данных
- Что такое потоковая обработка данных и пакетная обработка данных?

## ClickHouse
- Как работает ClickHouse?
- Что такое колоночная база данных, в чем ее преимущества и недостатки?
- Отличия OLAP vs OLTP 
- Основные движки ClickHouse

## Python
- Какие бывают магические функции в Python?
- Что такое декораторы в Python?
- Что такое try except else finally
- Чем отличается итератор от генератора? 
```python
# Что выведет print(a)?
a = [1,2,3]
b = a
b.append(4)
```
- Какие типы данных в Python являются изменяемыми и неизменяемыми? 
- Как работает память в питоне?
- Как работает сборщик мусора в python?
- Написать сортировка пузырьком, быструю сортировку, сортировку слиянием
- Можно ли в словарь в key записать изменяемый тип? Почему?

## Apache Spark
- Почему нельзя использовать Pandas для больших данных, а нужно использовать Spark?
- Минимальное параллелизм в Spark и что это такое?
- Что такое RDD в Spark?
- Что такое Dataset и чем отличается от dataframe и RDD?  
- Какие виды кэширования существуют в Spark и чем они отличаются?
- Что такое persist в Spark и какие storage levels существуют?
- Чем отличается repartition от coalesce в Spark?
- Что делает YARN и зачем он нужен?
- Какие настройки Spark applications вы используете?
- Сколько гигабайт памяти выделяется на каждую задачу в Spark?
- Что такое spill в Spark?
- Что такое broadcast join в Spark и как его настроить?
- Что такое ленивые вычисления в Spark? 
- Что такое Adaptive query execution?

## Apache Airflow
- Сколько типов сервисов в Docker при разворачивании Airflow? 
- Чем отличатеся Celery Executor local executor
- Какая база данных используется в Airflow?
- Можно ли передавать данные по XCOM?

## HDFS
- Что такое HDFS блоки и какие у них есть минусы?
- Как бороться с маленькими файлами в HDFS? Переполнение NameNode


